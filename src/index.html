<!doctype html>
<html lang="en" shadow-style-mode="page-push">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{site.name}</title>
    <meta name="description" content="{site.description}" />

    <link rel="stylesheet" href="/css/style.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <script src="/js/shadow-boxing.js" defer></script>
    <script
      src="https://unpkg.com/@alenaksu/json-viewer@2.0.0/dist/json-viewer.bundle.js"
      defer
    ></script>
    <script type="module">
      import "/js/track-viewer.js";

      document.addEventListener("track-viewer-parsed", (event) => {
        window.json.data = event.target.gpxStats;
      });

      document.querySelectorAll(".track-loader").forEach((button) =>
        button.addEventListener("click", ({ target }) => {
          window.app.track = target.dataset.track;
        }),
      );
    </script>
  </head>
  <body>
    <div flow-md>
      <header class="site-header" flow>
        <h1>{site.name}</h1>
      </header>
      <main flow>
        <track-viewer
          id="app"
          lat="38.895"
          long="-77.036"
          scrollintoview="this"
        >
          <json-viewer id="json"></json-viewer>
        </track-viewer>
        <div>
          <article flow>
            <ul class="all-runs flex" wrap role="list">
              <loop through="tracks" val="track">
                <li class="card">
                  <p>{track.locale}</p>
                  <button-group>
                    <button
                      class="track-loader"
                      data-track="/tracks/{track.path}"
                    >
                      Load
                    </button>
                  </button-group>
                </li>
              </loop>
            </ul>
          </article>
        </div>
      </main>
    </div>
  </body>
</html>
